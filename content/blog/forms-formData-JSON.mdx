---
title: JavaScript Essentials | Sending Data from Forms (FormData vs. JSON)
description: Learn how to send data from forms to a server using FormData and JSON, with practical examples including file uploads and a React and TypeScript implementation. We'll also explore how to view the data using Object.fromEntries() and for...of loops.
date: 2024-08-16
tags: ["JavaScript", "forms", "React", "TS"]
published: True
---

Sending form data to a server is a common task in web development. There are multiple ways to achieve this, with `FormData` and JSON being two of the most popular methods. In this article, we'll explore how to use each method, including file uploads, and how to inspect the data using `Object.fromEntries()` and `for...of` loops.

## Sending Form Data with `FormData`

`FormData` is a built-in JavaScript object that provides a way to easily construct key/value pairs representing form fields and their values. This is particularly useful for sending files, but it works well for any form data.

### Example: Basic Form Submission with `FormData`

Let's start with a simple HTML form that includes a file upload:

```html
<form id="myForm">
  <label for="username">Username:</label>
  <input type="text" id="username" name="username" required />

  <label for="email">Email:</label>
  <input type="email" id="email" name="email" required />

  <label for="profilePic">Profile Picture:</label>
  <input type="file" id="profilePic" name="profilePic" required />

  <button type="submit">Submit</button>
</form>
```

You can handle the form submission using JavaScript:

```js
const form = document.getElementById("myForm");

form.addEventListener("submit", function (event) {
  event.preventDefault();

  const formData = new FormData(form);

  // View the data using Object.fromEntries()
  const dataObject = Object.fromEntries(formData);
  console.log(dataObject);

  fetch("/submit", {
    method: "POST",
    body: formData,
  })
    .then((response) => response.json())
    .then((data) => console.log(data))
    .catch((error) => console.error("Error:", error));
});
```

### Why We Don't Send Headers with `FormData`

When sending data using `FormData`, you generally don't need to set the `Content-Type` header manually. The browser automatically sets the appropriate `Content-Type` to `multipart/form-data` and includes a boundary marker that separates the different parts of the form. Manually setting the `Content-Type` header can cause issues with how the data is processed on the server, as the boundary would not be included, making it difficult to parse the multipart data correctly.

### Inspecting Form Data with `Object.fromEntries()`

By using `Object.fromEntries(formData)`, you can easily convert the `FormData` object into a plain JavaScript object to inspect its contents:

```js
// Example output in the console
{
  username: "JohnDoe",
  email: "johndoe@example.com",
  profilePic: File {name: "profile.jpg", type: "image/jpeg", size: 102400, ...}
}
```

This is particularly useful for debugging or processing the form data before sending it to the server.

## Sending Data as JSON

Another common way to send form data is by encoding it as JSON. This method is useful when you're working with APIs that expect JSON-formatted data.

### Example: Sending Form Data as JSON

Consider the same form as before, but this time we'll serialize the data to JSON:

```js
const form = document.getElementById("myForm");

form.addEventListener("submit", function (event) {
  event.preventDefault();

  const formData = new FormData(form);
  const jsonObject = Object.fromEntries(formData);

  console.log(jsonObject);

  fetch("/submit", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(jsonObject),
  })
    .then((response) => response.json())
    .then((data) => console.log(data))
    .catch((error) => console.error("Error:", error));
});
```

Again, we use `Object.fromEntries()` to convert the `FormData` into a JSON-serializable object. However, note that file data cannot be directly serialized into JSON, so this method is most useful for text-based form data.

## Inspecting JSON Data

```js
// Example output in the console (files will be excluded)
{
  username: "JohnDoe",
  email: "johndoe@example.com"
}
```

Files are excluded from this JSON serialization because JSON.stringify() cannot handle file objects.

## Example: Form Submission with React and TypeScript

For a more advanced use case, let's implement form submission using React with TypeScript. We'll send the form data as JSON.

### React Component with TypeScript

```tsx
import React, { useState } from "react";

type FormData = {
  username: string;
  email: string;
};

const MyForm: React.FC = () => {
  const [formData, setFormData] = useState<FormData>({
    username: "",
    email: "",
  });

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value,
    });
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    try {
      const response = await fetch("/submit", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(formData),
      });

      const result = await response.json();
      console.log(result);
    } catch (error) {
      console.error("Error:", error);
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <label htmlFor="username">Username:</label>
      <input
        type="text"
        id="username"
        name="username"
        value={formData.username}
        onChange={handleChange}
        required
      />

      <label htmlFor="email">Email:</label>
      <input
        type="email"
        id="email"
        name="email"
        value={formData.email}
        onChange={handleChange}
        required
      />

      <button type="submit">Submit</button>
    </form>
  );
};

export default MyForm;
```

In this example, the data is directly sent as JSON, so there is no need to use `Object.fromEntries()` in the React implementation.

## When to Use FormData vs. JSON

- **Use `FormData`** when you need to send files or when you're working with forms that include file uploads. It's also useful when you need to simulate a traditional form submission.

- **Use `JSON when`** you're working with modern APIs that expect data to be formatted as JSON. This method is typically more efficient for sending structured data and is easier to work with in JavaScript.

## Conclusion

Choosing between FormData and JSON depends on the specific needs of your application. Understanding both methods and their use cases will allow you to make informed decisions when working with form data in JavaScript. Whether you're dealing with simple forms or complex React components, mastering these techniques is essential for modern web development.
